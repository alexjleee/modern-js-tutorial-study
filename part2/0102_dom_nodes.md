# DOM 트리

- 브라우저는 HTML 문서를 파싱하여 브라우저가 이해할 수 있는 자료구조인 문서 객체 모델(DOM)을 생성한다.

- DOM은 트리 형태의 자료구조로 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어할 수 있는 API를 제공한다.

- DOM에 따르면 모든 HTML 태그는 객체이며 태그 사이의 문자 역시 객체이다. 이 모든 객체는 자바스크립트를 통해 접근할 수 있고 페이지를 조작할 때 이 객체를 사용한다.

  - 예: `document.body`는  `<body>` 태그를 객체로 나타낸 것

## DOM 구조

- DOM은 HTML을 태그 트리 구조로 표현한다. 트리의 각 노드는 모두 객체이다. 

```html
<!DOCTYPE HTML>
<html> 
  <head>
    <title>A HTML Document</title>
  </head>
  <body>
    Hello World!
  </body>
</html>
```

- `<html>`, `<head>`, `<title>`, `<body>` 등의 태그는 요소 노드(element node)가 된다. 요소 노드는 자식 노드를 가질 수 있다.

- 요소 내의 문자는 텍스트 노드(text node)가 된다. 텍스트 노드는 문자열만 담으며 자식 노드를 가질 수 없다. 

- 새 줄과 공백도 유효한 문자로 취급되기 때문에 텍스트 노드가 된다.
  
  - 예를 들어 위 HTML 문서에서 `<head>`와 `<title>` 사이의 새 줄과 공백이 있는데 이 역시 텍스트 노드가 된다. 
  
  - 단, `<head>` 이전의 공백과 새 줄은 무시되며, `</body>` 이후의 콘텐츠는 자동으로 `body` 안쪽으로 옮겨지기 때문에 `</body>` 뒤에는 공백이 올 수 없다. 그 외의 공백은 텍스토 노드가 된다.

### 기타 노드 

- 총 12개의 노드 타입이 있다. 실무에서는 주로 문서 노드(document node), 요소 노드(element node), 텍스트 노드(text node), 주석 노드(comment node)를 다룬다.

- 문서 노드(document node) : 문서 전체를 나타내는 `document` 객체 또한 DOM 노드이다. DOM의 진입점이 된다.

- 주석 노드(comment node) : HTML에 있는 것은 반드시 DOM 트리에 추가되어야 한다는 규칙 때문에 주석 또한 노드가 된다.


## 자동 교정

- 브라우저가 DOM 생성과정에서 비정상적인 HTML을 만날 경우 자동으로 이를 교정한다.

  - 최상위 태그가 되어야하는 `<html>`이 없는 경우, 문서 최상위에 자동으로 넣어준다. `<body>`도 마찬가지다.

  - `<p>some test`와 같이 닫는 태그가 없는 경우 자동으로 닫는 태그를 채워 넣는다.

  - `<table>` 내에 `<tbody>`가 없을 경우 자동으로 이를 만들어준다.

## 개발자 도구로 DOM 구조 직접 보기

- 개발자 도구의 Elements 패널에서 DOM을 볼 수 있다.

  - 개발자 도구에서는 문자열 양 끝 공백과 공백만 있는 텍스트 노드는 표시하지 않는다. (개발 중엔 대부분 요소 노드만 다루기 때문에 생략되어도 문제가 되지 않는다.)

  - 각각의 요소를 클릭하면 styles, computed styles, event listeners, properties 등의 상세 정보를 볼 수 있다.

## Console로 DOM 다루기

### Elements 패널에서 특정 요소를 선택하여 Console에서 다루기

1. 개발자 도구의 Elements 패널에서 변경하고 싶은 요소를 클릭하여 선택한다.

2. Esc를 눌러 Elements 패널 아래에 Console을 연다.

3. 현재 선택한 요소는 `$0`으로, 그 이전에 선택했던 요소는 `$1`로 접근할 수 있다.

### Console에서 특정 요소에 접근하기

- 해당 DOM 노드를 참조하는 변수가 있을 경우 Console에 `inspect(변수명)` 을 입력하면 Elements 패널에서 해당 요소가 강조된다.

- 해당 DOM 노드를 가리키는 객체, 또는 이를 참조하는 변수를 Console 패널에 입력하면 해당 노드를 Console에서 탐색할 수 있다.